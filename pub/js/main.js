"use strict";const urlAboutLoggedIn="http://studenter.miun.se/~seko1800/dt173g/projekt/api/cv_api.php/about";function getUserInfo(){fetch(urlAboutLoggedIn).then(e=>e.json()).then(e=>{let t="";e.forEach(function(e){t+=`<tr>\n                    <td>${e.name}</td>\n                    <td>${e.personal_id}</td>\n                    <td>${e.address}</td>\n                    <td>${e.zip_code}</td>\n                    <td>${e.city}</td>\n                    <td>${e.email}</td>\n                    <td>0${e.phone}</td>\n                    <td id='${e.id}' class='editBtn' onClick='updateFormUser(this.id);'><i class="fas fa-edit"></i></td>\n                </tr>`}),document.getElementById("aboutOutput").innerHTML=t})}function updateFormUser(e){fetch(`${urlAboutLoggedIn}/${e}`).then(e=>e.json()).then(t=>{let n="<h3>Ändra personuppgifter</h3>";t.forEach(function(t){n+=`<form>\n                <label>\n                    Namn: <br>\n                    <input type='text' name='cv_name' id='cv_name' class='inputField' value='${t.name}' required />\n                </label>\n                <label class='rightLabel'>\n                    Adress: <br>\n                    <input type='text' name='cv_address' id='cv_address' class='inputField' value='${t.address}' required />\n                </label>\n                <label>\n                    Postnummer: <br>\n                    <input type='text' name='cv_zip_code' id='cv_zip_code' class='inputField' value='${t.zip_code}' required />\n                </label>\n                <label class="rightLabel">\n                    Stad: <br>\n                    <input type='text' name='cv_city' id='cv_city' class='inputField' value='${t.city}' required />\n                </label>\n                <label>\n                    E-mail: <br>\n                    <input type='text' name='cv_email' id='cv_email' class='inputField' value='${t.email}' required />\n                </label>\n                <label class="rightLabel">\n                    Telefonnummer: <br>\n                    <input type='text' name='cv_phone' id='cv_phone' class='inputField' value='0${t.phone}' required />\n                </label>\n                <input type='submit' value='Spara' class='formBtn' name='formBtn' onClick='updateAbout(${e})'>\n                </form>`}),document.getElementById("updateAbout").innerHTML=n})}function updateAbout(e){const t=`${urlAboutLoggedIn}/${e}`;let n=document.getElementById("cv_name").value,l=document.getElementById("cv_address").value,i=document.getElementById("cv_zip_code").value,o=document.getElementById("cv_city").value,d=document.getElementById("cv_email").value,a=document.getElementById("cv_phone").value;if(""==n||null==n&&""==l||null==l&&""==i||null==i||null==o&&""==o||null==d&&""==d||null==a&&""==a)console.log("Fel");else{let e=JSON.stringify({name:n,address:l,zip_code:i,city:o,email:d,phone:a});fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:e}).then(e=>e.json()).then(e=>location.reload(!0)).catch(e=>console.log(e))}}const urlEducationsLoggedIn="http://studenter.miun.se/~seko1800/dt173g/projekt/api/cv_api.php/educations";function getEducations(){fetch(urlEducationsLoggedIn).then(e=>e.json()).then(e=>{let t="";e.forEach(function(e){t+=`<tr>\n                    <td>${e.duration}</td>\n                    <td>${e.name}</td>\n                    <td>${e.type}</td>\n                    <td>${e.description}</td>\n                    <td id='${e.id}' class='editBtn' onClick='updateFormEducation(this.id);'><i class="fas fa-edit"></i></td>\n                    <td id='${e.id}' class='editBtn' onClick='deleteEducation(this.id);'><i class="fas fa-trash-alt"></i></td>\n                </tr>`}),document.getElementById("educationsOutput").innerHTML=t})}function updateFormEducation(e){fetch(`${urlEducationsLoggedIn}/${e}`).then(e=>e.json()).then(t=>{let n="<h3>Ändra utbildning</h3>";t.forEach(function(t){n+=`<form>\n                <label>\n                    Varaktighet: <br>\n                    <input type='text' name='cv_durationUE' id='cv_durationUE' class='inputField' value='${t.duration}' required />\n                </label>\n                <label class='rightLabel'>\n                    Lärosäte: <br>\n                    <input type='text' name='cv_nameUE' id='cv_nameUE' class='inputField' value='${t.name}' required />\n                </label>\n                <label>\n                    Typ: <br>\n                    <input type='text' name='cv_typeUE' id='cv_typeUE' class='inputField' value='${t.type}' required />\n                </label>\n                <label class="rightLabel">\n                    Beskrivning: <br>\n                    <input type='text' name='cv_descriptionUE' id='cv_descriptionUE' class='inputField' value='${t.description}' required />\n                </label>\n                <input type='submit' value='Spara' class='formBtn' name='formBtn' onClick='updateEducation(${e})'>\n                </form>`}),document.getElementById("updateEducations").innerHTML=n})}function updateEducation(e){const t=`${urlEducationsLoggedIn}/${e}`;let n=document.getElementById("cv_durationUE").value,l=document.getElementById("cv_nameUE").value,i=document.getElementById("cv_typeUE").value,o=document.getElementById("cv_descriptionUE").value;if(""==n||null==n&&""==l||null==l&&""==i||null==i||null==o&&""==o)console.log("Fel");else{let e=JSON.stringify({duration:n,name:l,type:i,description:o});fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:e}).then(e=>e.json()).then(e=>location.reload(!0)).catch(e=>console.log(e))}}function addEducation(){let e=document.getElementById("cv_durationE").value,t=document.getElementById("cv_nameE").value,n=document.getElementById("cv_typeE").value,l=document.getElementById("cv_descriptionE").value;if(""==e||null==e&&""==t||null==t&&""==n||null==n||null==l&&""==l)console.log("Fel");else{let i=JSON.stringify({duration:e,name:t,type:n,description:l});fetch(urlEducationsLoggedIn,{method:"POST",headers:{"Content-Type":"application/json"},body:i}).then(e=>e.json()).then(e=>location.reload(!0)).catch(e=>console.log(e))}}function deleteEducation(e){fetch(`${urlEducationsLoggedIn}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>location.reload(!0)).catch(e=>console.log(e))}const urlJobsLoggedIn="http://studenter.miun.se/~seko1800/dt173g/projekt/api/cv_api.php/jobs";function getJobs(){fetch(urlJobsLoggedIn).then(e=>e.json()).then(e=>{let t="";e.forEach(function(e){t+=`<tr>\n                    <td>${e.duration}</td>\n                    <td>${e.company}</td>\n                    <td>${e.role}</td>\n                    <td>${e.description}</td>\n                    <td id='${e.id}' class='editBtn' onClick='updateFormJob(this.id);'><i class="fas fa-edit"></i></td>\n                    <td id='${e.id}' class='editBtn' onClick='deleteJob(this.id);'><i class="fas fa-trash-alt"></i></td>\n                </tr>`}),document.getElementById("jobsOutput").innerHTML=t})}function updateFormJob(e){fetch(`${urlJobsLoggedIn}/${e}`).then(e=>e.json()).then(t=>{let n="<h3>Ändra jobb</h3>";t.forEach(function(t){n+=`<form>\n                <label>\n                    Varaktighet: <br>\n                    <input type='text' name='cv_durationU' id='cv_durationU' class='inputField' value='${t.duration}' required />\n                </label>\n                <label class='rightLabel'>\n                    Företag: <br>\n                    <input type='text' name='cv_companyU' id='cv_companyU' class='inputField' value='${t.company}' required />\n                </label>\n                <label>\n                    Roll: <br>\n                    <input type='text' name='cv_roleU' id='cv_roleU' class='inputField' value='${t.role}' required />\n                </label>\n                <label class="rightLabel">\n                    Beskrivning: <br>\n                    <input type='text' name='cv_descriptionU' id='cv_descriptionU' class='inputField' value='${t.description}' required />\n                </label>\n                <input type='submit' value='Spara' class='formBtn' name='formBtn' onClick='updateJob(${e})'>\n                </form>`}),document.getElementById("updateJobs").innerHTML=n})}function updateJob(e){const t=`${urlJobsLoggedIn}/${e}`;let n=document.getElementById("cv_durationU").value,l=document.getElementById("cv_companyU").value,i=document.getElementById("cv_roleU").value,o=document.getElementById("cv_descriptionU").value;if(""==n||null==n&&""==l||null==l&&""==i||null==i||null==o&&""==o)console.log("Fel");else{let e=JSON.stringify({duration:n,company:l,role:i,description:o});fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:e}).then(e=>e.json()).then(e=>location.reload(!0)).catch(e=>console.log(e))}}function addJob(){let e=document.getElementById("cv_duration").value,t=document.getElementById("cv_company").value,n=document.getElementById("cv_role").value,l=document.getElementById("cv_description").value;if(""==e||null==e&&""==t||null==t&&""==n||null==n||null==l&&""==l)console.log("Fel");else{let i=JSON.stringify({duration:e,company:t,role:n,description:l});fetch(urlJobsLoggedIn,{method:"POST",headers:{"Content-Type":"application/json"},body:i}).then(e=>e.json()).then(e=>location.reload(!0)).catch(e=>console.log(e))}}function deleteJob(e){fetch(`${urlJobsLoggedIn}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>location.reload(!0)).catch(e=>console.log(e))}window.onload=function(){getUserInfo(),getJobs(),getEducations(),getWebsites()};const urlWebsitesLoggedIn="http://studenter.miun.se/~seko1800/dt173g/projekt/api/cv_api.php/websites";function getWebsites(){fetch(urlWebsitesLoggedIn).then(e=>e.json()).then(e=>{let t="";e.forEach(function(e){let n=e.url;n=n.substr(0,30),t+=`<tr>\n                    <td>${e.title}</td>\n                    <td>${n}[...]</td>\n                    <td>${e.description}</td>\n                    <td>${e.image}</td>\n                    <td id='${e.id}' class='editBtn' onClick='updateFormWebsite(this.id);'><i class="fas fa-edit"></i></td>\n                    <td id='${e.id}' class='editBtn' onClick='deleteWebsite(this.id);'><i class="fas fa-trash-alt"></i></td>\n                </tr>`}),document.getElementById("websitesOutput").innerHTML=t})}function updateFormWebsite(e){fetch(`${urlWebsitesLoggedIn}/${e}`).then(e=>e.json()).then(t=>{let n="<h3>Ändra webbplatser</h3>";t.forEach(function(t){n+=`<form>\n                <label>\n                    Titel: <br>\n                    <input type='text' name='cv_titleUW' id='cv_titleUW' class='inputField' value='${t.title}' required />\n                </label>\n                <label class='rightLabel'>\n                    Länk: <br>\n                    <input type='text' name='cv_urlUW' id='cv_urlUW' class='inputField' value='${t.url}' required />\n                </label>\n                <label>\n                    Beskrivning: <br>\n                    <input type='text' name='cv_descriptionUW' id='cv_descriptionUW' class='inputField' value='${t.description}' required />\n                </label>\n                <label class="rightLabel">\n                    Bildlänk: <br>\n                    <input type='text' name='cv_imageUW' id='cv_imageUW' class='inputField' value='${t.image}' required />\n                </label>\n                <input type='submit' value='Spara' class='formBtn' name='formBtn' onClick='updateWebsite(${e})'>\n                </form>`}),document.getElementById("updateWebsites").innerHTML=n})}function updateWebsite(e){const t=`${urlWebsitesLoggedIn}/${e}`;let n=document.getElementById("cv_titleW").value,l=document.getElementById("cv_urlW").value,i=document.getElementById("cv_descriptionW").value,o=document.getElementById("cv_imageW").value;if(""==n||null==n&&""==l||null==l&&""==i||null==i||null==o&&""==o)console.log("Fel");else{let e=JSON.stringify({title:n,url:l,description:i,image:o});fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:e}).then(e=>e.json()).then(e=>location.reload(!0)).catch(e=>console.log(e))}}function addWebsite(){let e=document.getElementById("cv_titleW").value,t=document.getElementById("cv_urlW").value,n=document.getElementById("cv_descriptionW").value,l=document.getElementById("cv_imageW").value;if(""==e||null==e&&""==t||null==t&&""==n||null==n||null==l&&""==l)console.log("Fel");else{let i=JSON.stringify({title:e,url:t,description:n,image:l});fetch(urlWebsitesLoggedIn,{method:"POST",headers:{"Content-Type":"application/json"},body:i}).then(e=>e.json()).then(e=>location.reload(!0)).catch(e=>console.log(e))}}function deleteWebsite(e){fetch(`${urlWebsitesLoggedIn}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>location.reload(!0)).catch(e=>console.log(e))}